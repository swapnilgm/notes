<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Volume resizing feature comparision - Notebook</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="This book covers the notes from understandings.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="vendor/mermaid.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">About</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Protocols</li><li class="chapter-item expanded "><a href="oauth.html"><strong aria-hidden="true">1.</strong> OAuth 2.0</a></li><li class="chapter-item expanded affix "><li class="part-title">Cloud Applications</li><li class="chapter-item expanded "><a href="object-store-comparison.html"><strong aria-hidden="true">2.</strong> Object store comparision</a></li><li class="chapter-item expanded "><a href="cloud-volume-resizing.html" class="active"><strong aria-hidden="true">3.</strong> Volume resizing feature comparision</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><div>Apache License 2.0</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Notebook</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/swapnilgm/notes" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#cloud-based-volume-resizing" id="cloud-based-volume-resizing">Cloud based volume resizing</a></h1>
<ul>
<li><a href="#abstract">Abstract</a></li>
<li><a href="#aws-ebs">AWS-EBS</a>
<ul>
<li><a href="#elastic-volumes-are-supported-on-the-following-instances">Elastic Volumes are supported on the following instances:</a></li>
<li><a href="#monitoring">Monitoring</a></li>
<li><a href="#limitation">Limitation</a></li>
</ul>
</li>
<li><a href="#gce-pd">GCE-PD</a></li>
<li><a href="#azure-disk">Azure disk</a></li>
<li><a href="#kubernetes-volume-resize">Kubernetes volume resize</a></li>
<li><a href="#alicloud">Alicloud</a></li>
<li><a href="#references">References</a></li>
</ul>
<h2><a class="header" href="#abstract" id="abstract">Abstract</a></h2>
<p>This documents captures the volume i.e. disk storage resizing feature on major cloud providers</p>
<table><thead><tr><th></th><th>AWS-EBS</th><th>GCE-PD</th><th>Azure disks</th><th>Cinder</th><th>Alicloud</th></tr></thead><tbody>
<tr><td>Resize supported from IaaS</td><td>yes</td><td>yes</td><td>yes</td><td>yes</td><td>yes</td></tr>
<tr><td>Resize supported on k8s</td><td>yes</td><td>yes</td><td>yes</td><td>yes</td><td>?</td></tr>
<tr><td>Volume resize while attached to running instance</td><td>yes</td><td>yes</td><td>?</td><td>No</td><td>No</td></tr>
</tbody></table>
<h2><a class="header" href="#aws-ebs" id="aws-ebs">AWS-EBS</a></h2>
<p>You can increase the volume size, change the volume type, or adjust the performance of your EBS volumes. <strong>If your instance supports Elastic Volumes, you can do so without detaching the volume or restarting the instance.</strong> This allows you to continue using your application while changes take effect.</p>
<h3><a class="header" href="#elastic-volumes-are-supported-on-the-following-instances" id="elastic-volumes-are-supported-on-the-following-instances">Elastic Volumes are supported on the following instances:</a></h3>
<ul>
<li>All <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instance-types.html#current-gen-instances">current-generation</a> instances</li>
<li>Previous-generation instance families C1, C3, CC2, CR1, G2, I2, M1, M3, and R3</li>
</ul>
<h3><a class="header" href="#monitoring" id="monitoring">Monitoring</a></h3>
<ul>
<li>When you modify an EBS volume, it goes through a sequence of states. The volume enters the modifying state, the optimizing state, and finally the completed state. At this point, the volume is ready to be further modified.</li>
<li>Volume modification changes take effect as follows:
<ul>
<li>
<p>Size changes usually take a few seconds to complete and take effect after a volume is in the Optimizing state.</p>
</li>
<li>
<p>Performance (IOPS) changes can take from a few minutes to a few hours to complete and are dependent on the configuration change being made.</p>
</li>
<li>
<p>It may take up to 24 hours for a new configuration to take effect, and in some cases more, such as when the volume has not been fully initialized. Typically, a fully used 1-TiB volume takes about 6 hours to migrate to a new performance configuration.</p>
</li>
</ul>
</li>
</ul>
<h3><a class="header" href="#limitation" id="limitation">Limitation</a></h3>
<ul>
<li>After provisioning over 32,000 IOPS on an existing io1 volume, you may need to do one of the following to see the full performance improvements:
<ul>
<li>Detach and attach the volume.</li>
<li>Restart the instance.</li>
</ul>
</li>
<li>Decreasing the size of an EBS volume is not supported. However, you can create a smaller volume and then migrate your data to it using an application-level tool such as rsync.</li>
<li>:warning: While m3.medium instances fully support volume modification, m3.large, m3.xlarge, and m3.2xlarge instances might not support all volume modification features.</li>
</ul>
<h2><a class="header" href="#gce-pd" id="gce-pd">GCE-PD</a></h2>
<ul>
<li>You can resize disks at any time, regardless of whether the disk is attached to a running instance.</li>
<li>After you resize your zonal persistent disk, you must configure the file system on the disk to use the additional disk space.</li>
</ul>
<h2><a class="header" href="#azure-disk" id="azure-disk">Azure disk</a></h2>
<ul>
<li>The new size should be greater than the existing disk size.</li>
</ul>
<h2><a class="header" href="#kubernetes-volume-resize" id="kubernetes-volume-resize">Kubernetes volume resize</a></h2>
<ul>
<li>Beta since kubernetes 1.11</li>
<li>Edit the storage size in <code>PersitentVolumeClaim</code>.</li>
<li>Required enabling the feature gate, <code>ExpandPersistentVolumes</code>, as well as the admission controller, <code>PersistentVolumeClaimResize</code>. By default enabled in 1.11+.</li>
<li>Current support from AWS-EBS, GCE-PD, Azure Disk, Azure File, Glusterfs, Cinder, Portworx, and Ceph RBD.</li>
<li>Enbale it by setting <code>allowVolumeExpansion</code> field to <code>true</code> in PVC configured StorageClass object.</li>
<li>Block storage volume types such as GCE-PD, AWS-EBS, Azure Disk, Cinder, and Ceph RBD typically require a <strong>file system expansion</strong> before the additional space of an expanded volume is usable by pods. Kubernetes takes care of this automatically whenever the <strong>pod(s) referencing your volume are restarted</strong>.</li>
<li>Post volume resize, if the <code>PersistentVolumeClaim</code> has the status <code>FileSystemResizePending</code>, it is safe to recreate the pod using the <code>PersistentVolumeClaim</code>.</li>
</ul>
<h2><a class="header" href="#alicloud" id="alicloud">Alicloud</a></h2>
<ul>
<li>Resize the data disks that are attached to an instance only when the instance is in the Running or Stopped status.</li>
<li>You must restart the instance in the ECS console to apply the changes. This action causes your instance to stop working and may cause your business to be interrupted, so please proceed with caution.</li>
</ul>
<h2><a class="header" href="#references" id="references">References</a></h2>
<ul>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-modify-volume.html">AWS volumes modification</a></li>
<li><a href="https://cloud.google.com/compute/docs/disks/add-persistent-disk#resize_pd">GCE resize persistent disks</a></li>
<li><a href="https://docs.microsoft.com/en-gb/azure/virtual-machines/windows/expand-os-disk">Expand azure disk</a></li>
<li><a href="https://docs.openstack.org/cinder/latest/cli/cli-manage-volumes.html#resize-a-volume">Resize cinder volume</a></li>
<li><a href="https://www.alibabacloud.com/help/doc-detail/25452.htm?spm=a2c63.p38356.879954.8.78ae534bhdbtGJ#concept-z11-xsh-ydb">Resize alicloud data disks</a></li>
<li><a href="https://kubernetes.io/blog/2018/07/12/resizing-persistent-volumes-using-kubernetes/">Kubernetes persistent volume resizing</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="object-store-comparison.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="object-store-comparison.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="vendor/mermaid.min.js"></script>
        
        <script type="text/javascript" src="vendor/mermaid-init.js"></script>
        

        

    </body>
</html>
