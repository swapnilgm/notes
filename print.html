<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Notebook</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="This book covers the notes from understandings.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="vendor/mermaid.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">About</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Protocols</li><li class="chapter-item expanded "><a href="oauth.html"><strong aria-hidden="true">1.</strong> OAuth 2.0</a></li><li class="chapter-item expanded affix "><li class="part-title">Cloud Applications</li><li class="chapter-item expanded "><a href="object-store-comparison.html"><strong aria-hidden="true">2.</strong> Object store comparision</a></li><li class="chapter-item expanded "><a href="cloud-volume-resizing.html"><strong aria-hidden="true">3.</strong> Volume resizing feature comparision</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><div>Apache License 2.0</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Notebook</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/swapnilgm/notes" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p><img src="images/314c8e04-3244-4523-8731-6d8bd6aefdad_200x200.png" alt="notes logo" /></p>
<h1><a class="header" href="#about" id="about">About</a></h1>
<p>General notes about things I learn daily. </p>
<p>Notes need not explain complete topic as whole but those are basically collection of facts I need to know when I refer to the title topic. At some places I have collected my unserstanding of the topic or new learnig in that area. Or some rare facts I had understood about the topic though my experience which might not be required in minimum knowledge of that topic. At some place, it have some content copied as it is from the refences as listed in end of documents. </p>
<p>It might be just collection of references in some documentation as I felt that those references are so precise that you might not need to browse something other than that.</p>
<h1><a class="header" href="#oauth-20" id="oauth-20">OAuth 2.0</a></h1>
<ul>
<li><a href="oauth.html#abstract">Abstract</a></li>
<li><a href="oauth.html#identity-use-case">Identity Use case</a></li>
<li><a href="oauth.html#motivation">Motivation</a></li>
<li><a href="oauth.html#oauth">OAuth</a></li>
<li><a href="oauth.html#high-level-diagram">High Level Diagram</a></li>
<li><a href="oauth.html#terminology">Terminology</a></li>
<li><a href="oauth.html#openid-connect">OpenID Connect</a></li>
</ul>
<h2><a class="header" href="#abstract" id="abstract">Abstract</a></h2>
<blockquote>
<p>The OAuth 2.0 authorization framework enables a third-party
application to obtain limited access to an HTTP service, either on
behalf of a resource owner by orchestrating an approval interaction
between the resource owner and the HTTP service, or by allowing the
third-party application to obtain access on its own behalf<sup class="footnote-reference"><a href="#1">1</a></sup>. </p>
</blockquote>
<ul>
<li>Authorize third party client application on behalf of user using external autherization server</li>
</ul>
<h2><a class="header" href="#identity-use-case" id="identity-use-case">Identity Use case</a></h2>
<ol>
<li>Simple login</li>
<li>Single-sign on across multiple sites</li>
<li>Mobile app login</li>
<li>Delegated authorization </li>
</ol>
<h2><a class="header" href="#motivation" id="motivation">Motivation</a></h2>
<ul>
<li>In old client-server model, third party tool needs to store and manage the resource owner credentials. </li>
<li>Third party application used to get full access.</li>
<li>Risk of compramising credentials on third party application.</li>
<li>No way to revoke the access</li>
<li>OAuth addressess these issues</li>
</ul>
<h2><a class="header" href="#oauth" id="oauth">OAuth</a></h2>
<ul>
<li>Introduction of authorization layer</li>
<li>Role based seggregation of third aprty application/client and Resource owner</li>
</ul>
<blockquote>
<p>Instead of using the resource owner's credentials to access protected
resources, the client obtains an access token -- a string denoting a
specific scope, lifetime, and other access attributes.  Access tokens
are issued to third-party clients by an authorization server with the
approval of the resource owner.  The client uses the access token to
access the protected resources hosted by the resource server<sup class="footnote-reference"><a href="#1">1</a></sup>.</p>
</blockquote>
<blockquote>
<p>For example, an end-user (resource owner) can grant a printing
service (client) access to her protected photos stored at a photo-
sharing service (resource server), without sharing her username and
password with the printing service.  Instead, she authenticates
directly with a server trusted by the photo-sharing service
(authorization server), which issues the printing service delegation-
specific credentials (access token).</p>
</blockquote>
<h2><a class="header" href="#high-level-diagram" id="high-level-diagram">High Level Diagram</a></h2>
<pre><code class="language-mermaid">graph TD
    subgraph app[&quot;fas:fa-server Application server&quot;]
     app.authServer[&quot;Authorization Server&quot;] 
     app.resourceServer[&quot;Resource server&lt;br&gt;(can be same as authorization server)&quot;]
    end
    subgraph client [&quot;Client&quot;]
        client.UI[&quot;Client UI&quot;]
        client.backend[&quot;Client application backend&quot;]
    end
    client.UI --&gt;|&quot;1. authorization request &lt;br&gt;with scope &lt;br&gt; redirect URI to client server&quot;| app.authServer
    app.authServer --&gt;|2. ask user to grant| owner[&quot;fa:fa-user Resource Owner&quot;]
    owner --&gt;|&quot;3. authorization code for grant&quot;| client.backend
    client.backend -.-&gt;|4. request access token&lt;br&gt;w.r.t authorization code| app.authServer
    app.authServer -.-&gt;|access token| client.backend
    client.backend -.-&gt;|do resource operaiton with access token| app.resourceServer
</code></pre>
<h2><a class="header" href="#terminology" id="terminology">Terminology</a></h2>
<ul>
<li>
<p>Resource Owner</p>
<ul>
<li>User who owns the data</li>
</ul>
</li>
<li>
<p>Client</p>
<ul>
<li>Client or third party application who wants to access user data on bahalf of user</li>
</ul>
</li>
<li>
<p>Authorization Server</p>
<ul>
<li>Main component who stores the authorizaiton details. And generates the access token and all.</li>
</ul>
</li>
<li>
<p>Resource Server</p>
<ul>
<li>Server which holds and serves the data</li>
</ul>
</li>
<li>
<p>Authorization Grant</p>
<ul>
<li>Set of permissions allowed by rsource owner to access the resource</li>
<li>Types:
<ul>
<li>authorization code</li>
<li>implicit (direct access token for browser based application)</li>
<li>resource owner credentials
<ul>
<li>one time use of credentials</li>
<li>implicit acess token generation</li>
</ul>
</li>
<li>client credentials
<ul>
<li>credentials on behalf of client</li>
<li>highrarchical structure</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Redirect URI</p>
<ul>
<li>callback URI of client provided to authorization server</li>
</ul>
</li>
<li>
<p>Scope</p>
<ul>
<li>Atomic unit of Policies or permissions over data</li>
</ul>
</li>
<li>
<p>Access Token</p>
<ul>
<li>key used by client post authorization to access data</li>
<li>has the scope information</li>
<li>valid for short period</li>
</ul>
</li>
<li>
<p>Refresh token</p>
<ul>
<li>credential used to obtain access token on expiry</li>
<li>valid for longer period</li>
<li>can be used to request additional scope</li>
</ul>
<pre><code class="language-mermaid">sequenceDiagram
    participant client
    participant authServer as &quot;Authorization Server&quot;
    participant resourceServer as &quot;Resource server&quot;
    client -&gt;&gt; authServer:&quot;Authorization grant&quot;
    activate authServer
    authServer -&gt;&gt;client:&quot;Access token &amp; refresh token&quot;
    deactivate authServer
    loop Application lifetime or till refresh token is valid 
        loop &quot;Till access token is valid&quot;
            client -&gt;&gt; resourceServer: Access token
            resourceServer -&gt;&gt; client: Protected resource

            client -&gt;&gt; resourceServer: Access token
            resourceServer -&gt;&gt; client: Invalid token
        end
        client -&gt;&gt; authServer: refresh token
        authServer -&gt;&gt; client: access token &amp; refresh token
    end
</code></pre>
</li>
<li>
<p>front channel</p>
<ul>
<li>Unsecure, over the internet</li>
<li>Visible query parramentes in browser etc.</li>
<li>Over-the-shoulder security breach</li>
</ul>
</li>
<li>
<p>back channel</p>
<ul>
<li>secure, backend server-to-server communication channel</li>
<li>shown with dotted lines in above diagram.</li>
</ul>
</li>
</ul>
<h2><a class="header" href="#openid-connect" id="openid-connect">OpenID Connect</a></h2>
<ul>
<li>
<p>In a sense in authentication protocol extension to OAuth 2.0</p>
</li>
<li>
<p>Out of the identity use cases mentioned above, first three comes under <strong>Authentication</strong> domain and only last one is real use case talking about <strong>authorization</strong>.</p>
</li>
<li>
<p>OAuth protocal was mainly desinged considering authorization use case.</p>
</li>
<li>
<p>There is no way to get user info in OAuth 2.0, hence its not suitable for completed authentication.</p>
</li>
<li>
<p>Adds ID token </p>
</li>
</ul>
<pre><code class="language-mermaid">
graph LR
    client.server[&quot;Client Backend&quot;] --&gt;|/userinfo| app.authServer[&quot;Applicaiton authorization server&quot;]

</code></pre>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>https://tools.ietf.org/html/rfc6749 &quot;RFC 6749&quot;</p>
</div>
<h1><a class="header" href="#cloud-based-object-store-comparison" id="cloud-based-object-store-comparison">Cloud based object store comparison</a></h1>
<ul>
<li><a href="object-store-comparison.html#limitations-comparison-table">Limitations comparison table</a></li>
<li><a href="object-store-comparison.html#azure-blob-storage-abs">Azure Blob Storage (ABS)</a></li>
<li><a href="object-store-comparison.html#aws-s3">AWS S3</a></li>
<li><a href="object-store-comparison.html#references">References</a></li>
</ul>
<h2><a class="header" href="#limitations-comparison-table" id="limitations-comparison-table">Limitations comparison table</a></h2>
<table><thead><tr><th>Resource</th><th>AWS</th><th>ABS</th><th>Swift</th><th>GCS</th><th>Alicloud</th></tr></thead><tbody>
<tr><td>bucket name length</td><td>3-63 char</td><td>resourcegrp 1-90char, storage-account 3-24char, container 3-63char</td><td>256 bytes</td><td>3-64 char, no goole prefix or mispell</td><td>3-63  char</td></tr>
<tr><td>object name</td><td>unlimited</td><td>1-1024</td><td>1024 bytes</td><td>1024</td><td>1023</td></tr>
<tr><td>buckets per account</td><td>default 100, on demand no limit</td><td>250 storage account, no limit on bucket per account</td><td>-</td><td>-</td><td>30 buckets per region</td></tr>
<tr><td>Objects per bucket</td><td>unlimited</td><td>capacity limits 2 PB for US and Europe, 500 TB for all other regions per stoarge account</td><td>unlimited</td><td>unlimited from forum</td><td>unlimited</td></tr>
<tr><td>Object Read requests per bucket</td><td>autoscale</td><td>20000req/sec per storage account</td><td>-</td><td>5000 reads per second, autoscales as needed</td><td>10GBps</td></tr>
<tr><td>Objects Write request per bucket</td><td>autoscale</td><td>consider in above</td><td>-</td><td>1000 reads per second, autoscales as needed</td><td>10GBps</td></tr>
<tr><td>Max Object size</td><td>5 TB</td><td>4.75 TB</td><td>5 GB</td><td>5 TB</td><td>5 GB, 48GB with multipart</td></tr>
<tr><td>Chunk size</td><td>5MB to 5 GB</td><td>up to 100 MiB</td><td>up to 5 GB</td><td>-</td><td>5GB</td></tr>
<tr><td>Max no. of Chunks</td><td>10,000</td><td>50,000</td><td>1,000</td><td>32<sup>x</sup></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>Writes per object</td><td></td><td></td><td></td><td>once per second</td><td></td></tr>
<tr><td>Writes per bucket</td><td></td><td>20000 per second request per account</td><td></td><td>no limits</td><td></td></tr>
<tr><td>HTTP Compression</td><td>[No</td><td>(https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObject.html)</td><td><a href="https://docs.microsoft.com/en-us/rest/api/storageservices/put-blob">No</a></td><td></td><td><a href="https://cloud.google.com/storage/docs/transcoding">yes</a></td></tr>
</tbody></table>
<h2><a class="header" href="#azure-blob-storage-abs" id="azure-blob-storage-abs">Azure Blob Storage (ABS)</a></h2>
<table><thead><tr><th>Resource</th><th>Limit</th></tr></thead><tbody>
<tr><td>Number of storage accounts per region per subscription</td><td>2001</td></tr>
<tr><td>Max storage account capacity</td><td>500 TiB2</td></tr>
<tr><td>Max number of blob containers, blobs, file shares, tables, queues, entities, or messages per storage account</td><td>No limit</td></tr>
<tr><td>Maximum request rate per storage account</td><td>20,000 requests per second2</td></tr>
<tr><td>Max ingress3 per storage account (US Regions)</td><td>10 Gbps if RA-GRS/GRS enabled, 20 Gbps for LRS/ZRS4</td></tr>
<tr><td>Max egress3 per storage account (US Regions)</td><td>20 Gbps if RA-GRS/GRS enabled, 30 Gbps for LRS/ZRS4</td></tr>
<tr><td>Max ingress3 per storage account (Non-US regions)</td><td>5 Gbps if RA-GRS/GRS enabled, 10 Gbps for LRS/ZRS4</td></tr>
<tr><td>Max egress3 per storage account (Non-US regions)</td><td>10 Gbps if RA-GRS/GRS enabled, 15 Gbps for LRS/ZRS4</td></tr>
<tr><td>Max size of single blob container</td><td>Same as max storage account capacity</td></tr>
<tr><td>Max number of blocks in a block blob or append blob</td><td>50,000 blocks</td></tr>
<tr><td>Max size of a block in a block blob</td><td>100 MiB</td></tr>
<tr><td>Max size of a block blob</td><td>50,000 X 100 MiB (approx. 4.75 TiB)</td></tr>
<tr><td>Max size of a block in an append blob</td><td>4 MiB</td></tr>
<tr><td>Max size of an append blob</td><td>50,000 x 4 MiB (approx. 195 GiB)</td></tr>
<tr><td>Max size of a page blob</td><td>8 TiB</td></tr>
<tr><td>Max number of stored access policies per blob container</td><td>5</td></tr>
<tr><td>Target throughput for single blob</td><td>Up to 60 MiB per second, or up to 500 requests per second</td></tr>
</tbody></table>
<h2><a class="header" href="#aws-s3" id="aws-s3">AWS S3</a></h2>
<table><thead><tr><th>Item</th><th>Specification</th></tr></thead><tbody>
<tr><td>Maximum object size</td><td>5 TB</td></tr>
<tr><td>Maximum number of parts per upload</td><td>10,000</td></tr>
<tr><td>Part numbers</td><td>1 to 10,000 (inclusive)</td></tr>
<tr><td>Part size</td><td>5 MB to 5 GB, last part can be &lt; 5 MB</td></tr>
<tr><td>Maximum number of parts returned for a list parts request</td><td>1000</td></tr>
<tr><td>Maximum number of multipart uploads returned in a list multipart uploads request</td><td>1000</td></tr>
</tbody></table>
<h2><a class="header" href="#references" id="references">References</a></h2>
<ol>
<li>GCS: <a href="https://cloud.google.com/storage/quotas">https://cloud.google.com/storage/quotas</a></li>
<li>AWS: <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html">https://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html</a></li>
<li>Azure ABS: <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-scalability-targets?toc=%2fazure%2fstorage%2fblobs%2ftoc.json">https://docs.microsoft.com/en-us/azure/storage/common/storage-scalability-targets?toc=%2fazure%2fstorage%2fblobs%2ftoc.json</a></li>
<li>Openstack Swift: <a href="https://docs.openstack.org/mitaka/config-reference/object-storage/features.html">https://docs.openstack.org/mitaka/config-reference/object-storage/features.html</a></li>
<li>Alicloud OSS https://www.alibabacloud.com/help/doc-detail/54464.htm?spm=a2c63.p38356.b99.6.5f627d91oCAUf5</li>
</ol>
<h1><a class="header" href="#cloud-based-volume-resizing" id="cloud-based-volume-resizing">Cloud based volume resizing</a></h1>
<ul>
<li><a href="cloud-volume-resizing.html#abstract">Abstract</a></li>
<li><a href="cloud-volume-resizing.html#aws-ebs">AWS-EBS</a>
<ul>
<li><a href="cloud-volume-resizing.html#elastic-volumes-are-supported-on-the-following-instances">Elastic Volumes are supported on the following instances:</a></li>
<li><a href="cloud-volume-resizing.html#monitoring">Monitoring</a></li>
<li><a href="cloud-volume-resizing.html#limitation">Limitation</a></li>
</ul>
</li>
<li><a href="cloud-volume-resizing.html#gce-pd">GCE-PD</a></li>
<li><a href="cloud-volume-resizing.html#azure-disk">Azure disk</a></li>
<li><a href="cloud-volume-resizing.html#kubernetes-volume-resize">Kubernetes volume resize</a></li>
<li><a href="cloud-volume-resizing.html#alicloud">Alicloud</a></li>
<li><a href="cloud-volume-resizing.html#references">References</a></li>
</ul>
<h2><a class="header" href="#abstract-1" id="abstract-1">Abstract</a></h2>
<p>This documents captures the volume i.e. disk storage resizing feature on major cloud providers</p>
<table><thead><tr><th></th><th>AWS-EBS</th><th>GCE-PD</th><th>Azure disks</th><th>Cinder</th><th>Alicloud</th></tr></thead><tbody>
<tr><td>Resize supported from IaaS</td><td>yes</td><td>yes</td><td>yes</td><td>yes</td><td>yes</td></tr>
<tr><td>Resize supported on k8s</td><td>yes</td><td>yes</td><td>yes</td><td>yes</td><td>?</td></tr>
<tr><td>Volume resize while attached to running instance</td><td>yes</td><td>yes</td><td>?</td><td>No</td><td>No</td></tr>
</tbody></table>
<h2><a class="header" href="#aws-ebs" id="aws-ebs">AWS-EBS</a></h2>
<p>You can increase the volume size, change the volume type, or adjust the performance of your EBS volumes. <strong>If your instance supports Elastic Volumes, you can do so without detaching the volume or restarting the instance.</strong> This allows you to continue using your application while changes take effect.</p>
<h3><a class="header" href="#elastic-volumes-are-supported-on-the-following-instances" id="elastic-volumes-are-supported-on-the-following-instances">Elastic Volumes are supported on the following instances:</a></h3>
<ul>
<li>All <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instance-types.html#current-gen-instances">current-generation</a> instances</li>
<li>Previous-generation instance families C1, C3, CC2, CR1, G2, I2, M1, M3, and R3</li>
</ul>
<h3><a class="header" href="#monitoring" id="monitoring">Monitoring</a></h3>
<ul>
<li>When you modify an EBS volume, it goes through a sequence of states. The volume enters the modifying state, the optimizing state, and finally the completed state. At this point, the volume is ready to be further modified.</li>
<li>Volume modification changes take effect as follows:
<ul>
<li>
<p>Size changes usually take a few seconds to complete and take effect after a volume is in the Optimizing state.</p>
</li>
<li>
<p>Performance (IOPS) changes can take from a few minutes to a few hours to complete and are dependent on the configuration change being made.</p>
</li>
<li>
<p>It may take up to 24 hours for a new configuration to take effect, and in some cases more, such as when the volume has not been fully initialized. Typically, a fully used 1-TiB volume takes about 6 hours to migrate to a new performance configuration.</p>
</li>
</ul>
</li>
</ul>
<h3><a class="header" href="#limitation" id="limitation">Limitation</a></h3>
<ul>
<li>After provisioning over 32,000 IOPS on an existing io1 volume, you may need to do one of the following to see the full performance improvements:
<ul>
<li>Detach and attach the volume.</li>
<li>Restart the instance.</li>
</ul>
</li>
<li>Decreasing the size of an EBS volume is not supported. However, you can create a smaller volume and then migrate your data to it using an application-level tool such as rsync.</li>
<li>:warning: While m3.medium instances fully support volume modification, m3.large, m3.xlarge, and m3.2xlarge instances might not support all volume modification features.</li>
</ul>
<h2><a class="header" href="#gce-pd" id="gce-pd">GCE-PD</a></h2>
<ul>
<li>You can resize disks at any time, regardless of whether the disk is attached to a running instance.</li>
<li>After you resize your zonal persistent disk, you must configure the file system on the disk to use the additional disk space.</li>
</ul>
<h2><a class="header" href="#azure-disk" id="azure-disk">Azure disk</a></h2>
<ul>
<li>The new size should be greater than the existing disk size.</li>
</ul>
<h2><a class="header" href="#kubernetes-volume-resize" id="kubernetes-volume-resize">Kubernetes volume resize</a></h2>
<ul>
<li>Beta since kubernetes 1.11</li>
<li>Edit the storage size in <code>PersitentVolumeClaim</code>.</li>
<li>Required enabling the feature gate, <code>ExpandPersistentVolumes</code>, as well as the admission controller, <code>PersistentVolumeClaimResize</code>. By default enabled in 1.11+.</li>
<li>Current support from AWS-EBS, GCE-PD, Azure Disk, Azure File, Glusterfs, Cinder, Portworx, and Ceph RBD.</li>
<li>Enbale it by setting <code>allowVolumeExpansion</code> field to <code>true</code> in PVC configured StorageClass object.</li>
<li>Block storage volume types such as GCE-PD, AWS-EBS, Azure Disk, Cinder, and Ceph RBD typically require a <strong>file system expansion</strong> before the additional space of an expanded volume is usable by pods. Kubernetes takes care of this automatically whenever the <strong>pod(s) referencing your volume are restarted</strong>.</li>
<li>Post volume resize, if the <code>PersistentVolumeClaim</code> has the status <code>FileSystemResizePending</code>, it is safe to recreate the pod using the <code>PersistentVolumeClaim</code>.</li>
</ul>
<h2><a class="header" href="#alicloud" id="alicloud">Alicloud</a></h2>
<ul>
<li>Resize the data disks that are attached to an instance only when the instance is in the Running or Stopped status.</li>
<li>You must restart the instance in the ECS console to apply the changes. This action causes your instance to stop working and may cause your business to be interrupted, so please proceed with caution.</li>
</ul>
<h2><a class="header" href="#references-1" id="references-1">References</a></h2>
<ul>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-modify-volume.html">AWS volumes modification</a></li>
<li><a href="https://cloud.google.com/compute/docs/disks/add-persistent-disk#resize_pd">GCE resize persistent disks</a></li>
<li><a href="https://docs.microsoft.com/en-gb/azure/virtual-machines/windows/expand-os-disk">Expand azure disk</a></li>
<li><a href="https://docs.openstack.org/cinder/latest/cli/cli-manage-volumes.html#resize-a-volume">Resize cinder volume</a></li>
<li><a href="https://www.alibabacloud.com/help/doc-detail/25452.htm?spm=a2c63.p38356.879954.8.78ae534bhdbtGJ#concept-z11-xsh-ydb">Resize alicloud data disks</a></li>
<li><a href="https://kubernetes.io/blog/2018/07/12/resizing-persistent-volumes-using-kubernetes/">Kubernetes persistent volume resizing</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="vendor/mermaid.min.js"></script>
        
        <script type="text/javascript" src="vendor/mermaid-init.js"></script>
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
